pipeline {
    agent {label 'Windows-Slave'}

    stages {
        stage('test cmd shell') {
         steps {
            echo 'execute cmd ...'
            bat label: '', script: 'ipconfig  -all'
         }
    }
        stage("Using curl example") {
            steps {
                script {
                    def String expected_str = """This is a sample webpage deployed using Jenkins and GitHub integration. It has been updated"""
                    final String url = "http://44.201.170.127/"

                    final String response = bat(script: "curl -s $url", returnStdout: true).trim()

                    if (response.contains(expected_str)) {
                        echo "response: $response";
                    }
                     else{
                        currentBuild.result = 'FAILURE'
                    }
                }
            }
        }
    }
}